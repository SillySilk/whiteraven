{% extends 'base.html' %}
{% load static %}

{% block title %}{{ business_info.name|default:"White Raven Pourhouse" }} - {{ business_info.tagline|default:"The Best Little Pour House in Felton" }}{% endblock %}

{% block meta_description %}{{ business_info.description|default:"White Raven Pourhouse - The Best Little Pour House in Felton. Serving exceptional coffee and creating memorable experiences in Felton, CA." }}{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center min-vh-50">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-3">
                    {% if business_info %}
                        {{ business_info.name }}
                    {% else %}
                        White Raven Pourhouse
                    {% endif %}
                </h1>
                <p class="lead mb-4">
                    {% if business_info %}
                        {{ business_info.tagline }}
                    {% else %}
                        The Best Little Pour House in Felton
                    {% endif %}
                </p>
                
                {% if business_info.welcome_message %}
                <p class="mb-4">{{ business_info.welcome_message }}</p>
                {% elif business_info.description %}
                <p class="mb-4">{{ business_info.description }}</p>
                {% else %}
                <p class="mb-4">
                    Welcome to White Raven Pourhouse, where every cup tells a story and every visit creates memories. 
                    We're passionate about serving exceptional coffee and fostering community connections in the heart of Felton.
                </p>
                {% endif %}
                
                <!-- Current Status -->
                <div class="d-flex align-items-center mb-4">
                    <div class="status-indicator me-3">
                        <i class="bi bi-clock-fill fs-5 me-2"></i>
                        <span class="badge {% if is_open %}bg-success{% else %}bg-secondary{% endif %} fs-6">
                            {{ current_status }}
                        </span>
                        {% if status_details.is_special %}
                        <div class="mt-2">
                            <small class="text-warning">
                                <i class="bi bi-star-fill me-1"></i>{{ status_details.reason }}
                            </small>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="d-flex flex-wrap gap-3">
                    <a href="{% url 'menu:menu_list' %}" class="btn btn-light btn-lg">
                        <i class="bi bi-journal-text me-2"></i>View Our Menu
                    </a>
                    <a href="{% url 'core:contact' %}" class="btn btn-outline-light btn-lg">
                        <i class="bi bi-envelope me-2"></i>Contact Us
                    </a>
                </div>
            </div>
            
            <div class="col-lg-6 text-center">
                {% if business_info.hero_image %}
                    <div class="hero-image-container">
                        <img src="{{ business_info.hero_image.url }}" 
                             alt="{{ business_info.name }} - Coffee Shop" 
                             class="img-fluid rounded-3 shadow-lg"
                             style="max-height: 400px; width: 100%; object-fit: cover;">
                    </div>
                {% else %}
                    <div class="hero-image-placeholder bg-light rounded-3 p-5 text-dark">
                        <i class="bi bi-cup-hot display-1 mb-3"></i>
                        <p class="mb-0">Hero Image Placeholder</p>
                        <small class="text-muted">Upload a beautiful coffee shop image in the admin</small>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Featured Menu Items -->
{% if featured_items %}
<section class="featured-menu py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">Featured Items</h2>
            <p class="lead">Try our most popular selections</p>
        </div>
        
        <div class="row g-4">
            {% for item in featured_items %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm">
                    {% if item.image %}
                        <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}" style="height: 200px; object-fit: cover;">
                    {% else %}
                        <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center text-white" style="height: 200px;">
                            <i class="bi bi-image fs-1"></i>
                        </div>
                    {% endif %}
                    
                    <div class="card-body d-flex flex-column">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="card-title">{{ item.name }}</h5>
                            <span class="badge bg-primary fs-6">{{ item.display_price }}</span>
                        </div>
                        
                        <p class="card-text text-muted flex-grow-1">{{ item.description|truncatewords:15 }}</p>
                        
                        <div class="d-flex justify-content-between align-items-center mt-2">
                            <small class="text-muted">
                                <i class="bi bi-tag me-1"></i>{{ item.category.name }}
                            </small>
                            {% if item.contains_caffeine %}
                                <small class="text-warning">
                                    <i class="bi bi-lightning-charge-fill me-1"></i>Caffeine
                                </small>
                            {% endif %}
                        </div>
                        
                        {% if item.dietary_notes %}
                        <div class="mt-2">
                            <small class="text-info">
                                <i class="bi bi-info-circle me-1"></i>{{ item.dietary_notes }}
                            </small>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <a href="{% url 'menu:menu_list' %}" class="btn btn-primary btn-lg">
                <i class="bi bi-arrow-right me-2"></i>View Full Menu
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Business Info Section -->
<section class="business-info py-5">
    <div class="container">
        <div class="row g-5">
            <!-- Location & Hours -->
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4">
                        <h3 class="card-title mb-4">
                            <i class="bi bi-geo-alt-fill text-primary me-2"></i>
                            Location & Hours
                        </h3>
                        
                        {% if business_info %}
                        <div class="mb-4">
                            <h5>Address</h5>
                            <p class="text-muted">{{ business_info.address|linebreaks }}</p>
                        </div>
                        
                        <div class="mb-4">
                            <h5>Contact</h5>
                            <p class="mb-1">
                                <i class="bi bi-telephone me-2"></i>
                                <a href="tel:{{ business_info.phone }}" class="text-decoration-none">{{ business_info.phone }}</a>
                            </p>
                            <p class="mb-0">
                                <i class="bi bi-envelope me-2"></i>
                                <a href="mailto:{{ business_info.email }}" class="text-decoration-none">{{ business_info.email }}</a>
                            </p>
                        </div>
                        {% endif %}
                        
                        <div class="d-flex justify-content-between">
                            <a href="{% url 'core:location' %}" class="btn btn-outline-primary">
                                <i class="bi bi-map me-2"></i>Get Directions
                            </a>
                            <span class="badge {% if is_open %}bg-success{% else %}bg-secondary{% endif %} fs-6 align-self-center">
                                {{ current_status }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Contact Form Preview -->
            <div class="col-lg-6">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body p-4">
                        <h3 class="card-title mb-4">
                            <i class="bi bi-envelope-fill text-primary me-2"></i>
                            Get In Touch
                        </h3>
                        
                        <p class="text-muted mb-4">
                            Have a question or want to share feedback? We'd love to hear from you! 
                            Reach out to us and we'll get back to you as soon as possible.
                        </p>
                        
                        <div class="d-grid gap-3">
                            <a href="{% url 'core:contact' %}" class="btn btn-primary">
                                <i class="bi bi-envelope me-2"></i>Send Us a Message
                            </a>
                            
                            {% if business_info.phone %}
                            <a href="tel:{{ business_info.phone }}" class="btn btn-outline-primary">
                                <i class="bi bi-telephone me-2"></i>Call Us
                            </a>
                            {% endif %}
                            
                            {% if business_info.instagram_url %}
                            <a href="{{ business_info.instagram_url }}" target="_blank" class="btn btn-outline-primary">
                                <i class="bi bi-instagram me-2"></i>Follow on Instagram
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="cta-section bg-dark text-white py-5">
    <div class="container text-center">
        <h2 class="display-6 fw-bold mb-3">Ready to Experience the Best?</h2>
        <p class="lead mb-4">Visit us today and discover why we're Felton's favorite coffee destination.</p>
        
        <div class="d-flex flex-wrap justify-content-center gap-3">
            <a href="{% url 'menu:menu_list' %}" class="btn btn-light btn-lg">
                <i class="bi bi-journal-text me-2"></i>Browse Menu
            </a>
            <a href="{% url 'core:location' %}" class="btn btn-outline-light btn-lg">
                <i class="bi bi-geo-alt me-2"></i>Find Us
            </a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.hero-section {
    background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
}

.min-vh-50 {
    min-height: 50vh;
}

.hero-image-placeholder {
    min-height: 300px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.status-indicator .badge {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
}

.card {
    transition: transform 0.2s ease-in-out;
}

.card:hover {
    transform: translateY(-5px);
}

.cta-section {
    background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
}
</style>
{% endblock %}